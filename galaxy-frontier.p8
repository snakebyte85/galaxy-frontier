pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
#include constants.lua
#include util.lua
#include timer.lua
#include projectiles.lua
#include enemy.lua
#include player.lua
#include space.lua
#include particles.lua

global={
   step=0,
   debug=false,
   log=true
}

function _init()
   global.step=0
   space_init()
   player_init()
   true_btnp_init()
   create_enemy_raider(63,-10,{
                          {x=63,y=10},
                          {x=118,y=63, bc={x=128,y=0,num=10} },
                          {x=63,y=118, bc={x=128,y=128,num=10} },
                          {x=10,y=63,  bc={x=0,y=128,num=10} },
                          {x=63,y=10,  bc={x=0,y=0,num=10} }
   })
   create_enemy_drone(20,20)
   create_enemy_frigate(30,30)
   create_enemy_bomber(100,100)
   create_planet("sun",50,50)
   create_planet("supernova",100,60)
   create_planet("moon")
end

function _update60()
   timers_update()
   true_btnp_update()
   space_update()
   player_update()
   enemies_update()
   projectiles_update()
   particles_update()

   player_check_collision()
   player_projectiles_check_collision()

   global.step = global.step + 1
end

function _draw()
   cls()
   if global.debug then
      rect(0,0,const.screen.max_x-1,const.screen.max_y-1, const.colors.red)
   end
   space_draw()
   enemies_draw()
   player_draw()
   projectiles_draw()
   particles_draw()
end

__gfx__
00000000000110000001100000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b071170bb071170bb071170b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700707777077077770770777707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777777777777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000077777700777777007777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007777000077770000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000077000000aa00000a99a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555000550055033000033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000550005500005503333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
006666005008800550588505033bb330000d10000001d00000000000000000000000000000000000000000000000000000000000000000000000000000000000
066cc660558888550088880033bbbb3300111d0000d1110000000000000000000000000000000000000000000000000000000000000000000000000000000000
06666660558888550088880033bbbb3300d1110000111d0000000000000000000000000000000000000000000000000000000000000000000000000000000000
006006005008800550588505033bb3300001d000000d100000000000000000000000000000000000000000000000000000000000000000000000000000000000
00800800000550005500005500333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555000550055003300330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110000110000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00011dd1111dd1111dd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0011dddd11dddd11dddd110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00011dd1111dd1111dd1100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011cc1100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000880001cc1000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001cc1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000017777100000000000000000dddddddd000000000000000000000000999999990000000000000000000000000000000000000000000000000000
000000000001111771111000000000000dddddddddddddd000000000000000000999999999999990000000000000000000000000000000000000000000000000
0000000000111113331111000000000dddddddddddddddddd0000000000000099999aaaaaaaa9999900000000000000000000000000000000000000000000000
000000000111111333311110000000dddddddddddddddddddd000000000000999aaaaaaaaaaaaaa9990000000000000000000000000000000000000000000000
000000000131133333311130000009ddddddddddddddddddddd0000000000999aaaaaaaaaaaaaaaa999000000000000000000000000000000000000000000000
0000000013311333333333310000999ddddddddddddddddddddd0000000099aaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000000
0000000033331199993333330009999999ddddd999999ddddd99900000099aaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000000
0000000033331119999199330099999999999999999999999999990000999aaaaaaaaaaaaaaaaaaaaaa999000000000000000000000000000000000000000000
000000009933111993319999009999999999999999999999999999000099aaaaaaaaaaaaaaaaaaaaaaaa99000000000000000000000000000000000000000000
00000000199111133311399304499999999999999999999999999990099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
00000000199311113311133304449999999999999999999999999990099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
00000000013311311111133004444999999999999999999999999990099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
0000000001111333111113306644444999999999999999999999994499aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000111111111111006664444444499999999999999999444499aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000011177771110006666644444444444444444444444444699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000000777777000006666664444444444444444444444466699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000000555666000006666666666666666644466666466666699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000066556666660006666666666666666666666666666666699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000000666666666666006666666666666666666666666666666699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
0000000006666666665566606666666666666666666666666666666699aaaaaaaaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000
00000000056666666555566006666666666666666666666666666660099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
00000000556655666555566606666666666666666666666666666660099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
00000000556555566655666606666666644444444444444444666660099aaaaaaaaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000
000000005665555666666666006444444444444444444444444444000099aaaaaaaaaaaaaaaaaaaaaaaa99000000000000000000000000000000000000000000
0000000066665566666666550044444444444444444444444444440000999aaaaaaaaaaaaaaaaaaaaaa999000000000000000000000000000000000000000000
0000000066666666655666550004444999999999999999994444400000099aaaaaaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000000
00000000666666665555666500009999999999999999999999940000000099aaaaaaaaaaaaaaaaaaaa9900000000000000000000000000000000000000000000
0000000005666666555566600000099999999999999999999990000000000999aaaaaaaaaaaaaaaa999000000000000000000000000000000000000000000000
00000000056666666556666000000099999999999999999999000000000000999aaaaaaaaaaaaaa9990000000000000000000000000000000000000000000000
0000000000666666666666000000000999ddddddddd9999990000000000000099999aaaaaaaa9999900000000000000000000000000000000000000000000000
000000000006555666666000000000000dddddddddddddd000000000000000000999999999999990000000000000000000000000000000000000000000000000
000000000000055666600000000000000000dddddddd000000000000000000000000999999990000000000000000000000000000000000000000000000000000
__sfx__
000f00000000000000020000200019000010000000000000000000000001000010000100002000030000300003000040000400004000040000300002000020000100001000000000000000000000000000000000
001000001800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
